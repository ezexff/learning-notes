# Linking

Компоновщик (также редактор связей, от англ. link editor, linker) --- инструментальная программа, которая производит компоновку («линковку»): принимает на вход один или несколько объектных модулей и собирает из них исполняемый или библиотечный файл-модуль

В MSVC для создания предкомпилированного заголовка по умолчанию генерируются 2 файла: stdafx.h и stdafx.cpp (можно использовать и другие имена). Первым шагом необходимо скомпилировать stdafx.cpp с флагом /Yc«path-to-stdafx.h». По умолчанию создается файл с расширением .pch. Чтобы использовать предкомпилированный заголовок при компиляции исходного файла используем флаг /Yu«path-to-stdafx.h». Совместно с флагами /Yc и /Yu также можно использовать /Fp«path-to-pch» для указания пути к .pch файлу. Теперь необходимо подключить в каждой единице трансляции префиксный заголовок самым первым: либо непосредственно через #include «path-to-stdafx.h», либо принудительно через флаг /FI«path-to-stdafx.h»

Помимо того что компоновщик собирает .obj файлы воедино, он ещё и создаёт .exe файл, удовлетворяющий требованиям ОС (добавляет дополнительный код, необходимый для работы приложения под Windows, например, windows не знает про точку входа в программу main)

Мы можем не рекомпилировать некоторые translation юниты (например, библиотеку imgui), а добавить ранее скомпилированные .obj файлы компоновщику
```
/link imgui.obj
```

Windows обрабатывает по-разному консольное приложение и обычное приложение из-за чего могут возникнуть проблемы с совместимостью (обычное приложение не делает вывод в консоль). Поэтому необходимо указывать линкеру какого типа у нас приложение /SUBSYSTEM:windows или /SUBSYSTEM:console

Некоторые библиотеки могут у пользователя отсутствовать, например, xinput, тогда имеет смысл линковать эти библиотеки с нашей программой. В противном же случае, когда библиотеки точно есть на компьютере пользователей, например, opengl, то лучше использовать GetProcAdress(...)

.lib варианты
+ code library
+ import library (opengl32.lib, user32.lib and etc.)

В зависимости от того какая функция взятая из .lib линкер работает по-разному. Если это собственная функция MyFunction(...), то линкер не оставляет её название, а лишь call на адрес в тексте программы. Если же это функция по типу CreateWindow(...), то линкер создаёт call со ссылкой на Dynamic link table
